从HDFS读取数据的过程包括以下步骤：

1. 客户端应用程序向NameNode**发送读取请求**，指定要读取的**文件名和字节范围**。
2. NameNode回复包含请求数据的数据块的位置。这些位置是存储数据块副本的DataNode。
3. 客户端应用程序与所选DataNode之一建立连接，并发送读取请求，指定要读取的数据块ID和字节范围。
4. 所选DataNode回复所请求的数据。如果所请求的块不在所选DataNode上，则客户端应用程序将尝试与另一个副本位置建立连接。
5. 客户端应用程序接收数据并根据需要进行处理。
6. 如果所请求的数据跨越多个数据块，则客户端应用程序重复步骤3-5，直到读取所需数据为止。
7. 客户端应用程序完成读取数据后，发送“close”请求以释放连接。
8. 如果所请求的数据不在所选DataNode的缓存中，则DataNode可能会将读取请求转发到另一个副本位置以获取所请求的数据。

总的来说，HDFS旨在优化数据本地性，并尽可能减少网络数据传输。通过在不同的DataNode上存储多个数据块副本，HDFS可以确保即使某些DataNode失败或不可用，数据仍然可用。

![image-20230318091105940](images\image-20230318091105940.png)