#### HDFS拓扑结构下节点距离

> 在HDFS写数据过程中，NameNode会悬着距离待上传数据最近的DataNode接受数据。
>
> 节点距离：两个节点到达最近的共同祖先的距离总和。



在Hadoop分布式文件系统（HDFS）中，两个节点之间的绝对距离是指在数据传输过程中需要经过的网络跳数。距离不是以物理单位（如米或千米）来衡量，而是**以数据包在从一个节点到另一个节点的过程中经过的网络交换机或路由器数量来衡量**。

为了计算HDFS中两个节点之间的绝对距离，Hadoop框架依赖于一个网络拓扑表示，该表示将集群中所有节点的物理位置和网络连接性映射出来。网络拓扑被表示为一棵树形结构，其中根节点表示整个集群，每个后续节点表示一个网络交换机或路由器，而叶节点表示集群中的单个数据节点。

当客户端请求写入数据到HDFS时，Hadoop框架使用网络拓扑信息来确定最适合存储数据的数据节点。**Hadoop寻求将数据存储在最接近的数据节点上，以最小化距离**，从而减少传输数据所需的时间。

除了数据存储外，Hadoop还在集群中的多个节点上复制数据，以确保数据的耐用性和可用性。每个块的副本数由复制因子指定，该因子可以由系统管理员进行配置。默认情况下，Hadoop在集群中的不同数据节点上存储每个块的三个副本，以最小化由于硬件故障导致的数据丢失风险。

总体而言，在HDFS中，两个节点之间的绝对距离是确定Hadoop集群中数据存储和传输性能以及可靠性的重要因素。通过最小化节点之间的距离，Hadoop旨在优化数据传输，并确保在硬件故障的情况下数据的耐久性和可用性。

*通常节点距离计算可以类比树数据结构*