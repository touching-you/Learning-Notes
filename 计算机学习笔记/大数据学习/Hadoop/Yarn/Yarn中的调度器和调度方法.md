### 1.在 Yarn 中，有两种常见的资源调度方法：容量调度（Capacity Scheduler）和公平调度（Fair Scheduler）。

1. **容量调度**（Capacity Scheduler）：容量调度是 Yarn 默认的调度方法。**容量调度器基于资源容量为每个队列分配一定的资源，然后将剩余的资源分配给其他队列**。**每个队列都有一个最小资源保证，即使其他队列消耗了所有资源，也必须满足该队列的最小资源保证**。容量调度器适用于需要对不同的应用程序分配不同的资源量的场景。
2. **公平调度**（Fair Scheduler）：公平调度器将集群的资源分配给所有正在运行的应用程序，并根据应用程序的资源需求和优先级分配资源。**公平调度器会按照先到先得的原则分配资源，确保所有应用程序都获得公平的资源分配**。**当资源有限时，公平调度器会尽可能满足高优先级应用程序的资源需求**。公平调度器适用于需要保证所有应用程序都能获得公平的资源分配的场景。

除了这两种调度方法之外，Yarn 还支持自定义调度器。自定义调度器可以根据用户的需求进行定制，例如根据应用程序的性质、集群的硬件配置、业务需求等进行调度。自定义调度器需要实现 Yarn 的 Scheduler 接口，并按照自己的逻辑进行资源调度。

总之，Yarn 的资源调度方法可以根据不同的应用场景进行灵活选择，以达到最优的资源利用效率和任务执行效率。



### 2.Yarn 提供了多种调度器实现，包括默认的 Capacity Scheduler 和 Fair Scheduler，以及支持自定义的调度器。以下是这些调度器的简要介绍：

1. **Capacity Scheduler**：容量调度器是 Yarn 的默认调度器。**它将集群资源划分为多个队列，并为每个队列分配一定的资源容量。然后，容量调度器按照队列的优先级和资源需求，将剩余的资源分配给各个队列**。*每个队列都有一个最小资源保证，即使其他队列消耗了所有资源，也必须满足该队列的最小资源保证*。容量调度器适用于需要为不同的应用程序分配不同的资源量的场景。
2. **Fair Scheduler**：**公平调度器将集群资源分配给所有正在运行的应用程序，并根据应用程序的资源需求和优先级分配资源。**公平调度器会按照先到先得的原则分配资源，确保所有应用程序都获得公平的资源分配。当资源有限时，*公平调度器会尽可能满足高优先级应用程序的资源需求*。公平调度器适用于需要保证所有应用程序都能获得公平的资源分配的场景。
3. **Dominant Resource Fairness Scheduler**：DRF 调度器是公平调度器的扩展版本，它考虑了任务对集群资源的不同需求，以及节点资源使用情况的不均衡性。**DRF 调度器将节点的资源划分为多个维度，并将每个任务的资源需求表示为一个向量。然后，DRF 调度器按照维度最需要资源的任务进行资源分配。** *这种方法可以确保每个任务都能获得其最需要的资源，从而提高了整个集群的资源利用效率*。
4. **自定义调度器**：Yarn 还支持自定义调度器。自定义调度器可以根据用户的需求进行定制，例如根据应用程序的性质、集群的硬件配置、业务需求等进行调度。自定义调度器需要实现 Yarn 的 Scheduler 接口，并按照自己的逻辑进行资源调度。

以上是 Yarn 中常见的调度器实现。每种调度器都有其适用场景和优缺点，用户可以根据实际需求选择合适的调度器。

> DRF Scheduler考虑了两个重要因素：**主导资源和公平分享**。**主导资源是应用程序最需要的资源**。例如，如果应用程序需要的CPU比内存更多，则CPU是其主导资源。公平分享意味着每个应用程序应该获得其主导资源的平等份额。换句话说，DRF Scheduler基于每个应用程序的主导资源分配资源，确保每个应用程序都能公平地获取集群的资源。
>
> DRF Scheduler使用“**资源公平性**”而不是“**工作量(负载)公平性**”来分配资源。**工作量公平性意味着每个应用程序获得相等数量的资源，而不考虑其资源需求。然而，资源公平性更加有效，因为它考虑了每个应用程序的主导资源需求，并确保每个应用程序都能公平地获得集群的资源。**
>
> DRF Scheduler在应用程序具有不同类型的资源需求，且集群资源有限的情况下非常有用。它确保每个应用程序获得其公平份额的资源，从而提高了集群的整体性能